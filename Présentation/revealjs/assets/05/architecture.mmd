%% GEOCHALLENGE TRACKER - Architecture & Organisation (version simplifiÃ©e)
%% Fichier Ã  convertir : mmdc -i architecture.mmd -o assets/architecture.svg -b transparent

graph LR
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%% Dossiers (bloc gauche)
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
subgraph DIR["ğŸ“ Structure de dossiers"]
  D1["backend/<br/>â””â”€â”€ app<br/>   â”œâ”€â”€ api<br/>   â”œâ”€â”€ services<br/>   â””â”€â”€ models"]
  D2["frontend/<br/>â””â”€â”€ src<br/>   â”œâ”€â”€ pages<br/>   â””â”€â”€ components"]
  D3["ops/<br/>â””â”€â”€ deploy / nginx"]
end

%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%% Frontend
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
subgraph FE["ğŸ’» Frontend"]
  FE1["Vue.js<br/>Composants / Pages"]
  FE2["Pinia + Router"]
end

%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%% Backend
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
subgraph BE["ğŸ–¥ï¸ Backend"]
  BE1["FastAPI<br/>Routes + Services"]
  BE2["Pydantic<br/>Validation / SÃ©curitÃ©"]
end

%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%% Base de donnÃ©es
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
subgraph DB["ğŸ—„ï¸ MongoDB"]
  DB1["Collections<br/>caches / challenges"]
  DB2["userChallenges / tasks"]
end

%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%% Ops
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
subgraph OPS["ğŸ› ï¸ Ops"]
  OPS1["Docker Compose"]
  OPS2["Nginx / Reverse Proxy"]
end

%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%% Global
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
subgraph GL["ğŸŒ Global"]
  GL1["Backups"]
  GL2["Uploads GPX"]
end

%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%% Relations (simples)
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
D1 --> BE
D2 --> FE
D3 --> OPS
FE1 -->|Appels REST| BE1
BE1 -->|RequÃªtes / CRUD| DB1
OPS1 -->|Conteneurise| FE
OPS1 -->|Conteneurise| BE
OPS2 -->|Reverse proxy| FE
GL1 -.->|Sauvegarde| DB
GL2 -.->|DonnÃ©es importÃ©es| BE2

%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
%% Styles
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
classDef dir fill:#f3f4f6,stroke:#6b7280,color:#374151;
classDef frontend fill:#dcfce7,stroke:#16a34a,color:#064e3b;
classDef backend fill:#dbeafe,stroke:#2563eb,color:#1e3a8a;
classDef db fill:#fef9c3,stroke:#eab308,color:#854d0e;
classDef ops fill:#fae8ff,stroke:#a855f7,color:#6b21a8;
classDef global fill:#f3f4f6,stroke:#9ca3af,color:#374151;

class DIR,D1,D2,D3 dir;
class FE,FE1,FE2 frontend;
class BE,BE1,BE2 backend;
class DB,DB1,DB2 db;
class OPS,OPS1,OPS2 ops;
class GL,GL1,GL2 global;
